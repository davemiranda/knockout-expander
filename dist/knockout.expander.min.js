/*=============================================================================
	Author:			David Miranda - @davemiranda								
	License:		MIT (http://opensource.org/licenses/mit-license.php)		
																				
	Description:	KnockoutJS binding to expand and collapse elements.			
===============================================================================
*/
!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko)}(function(a){function b(a,b){function c(){g.addClass("expanded").removeClass("collapsed"),i.addClass("expanded").removeClass("collapsed"),j.hide(),k.show(),h.stop(!0,!1).animate({"max-height":h[0].scrollHeight+"px"},q),l=!0}function d(a){g.addClass("collapsed").removeClass("expanded"),i.addClass("collapsed").removeClass("expanded"),k.hide(),j.show(),a?h.css("max-height",n):(h.css("max-height",h[0].scrollHeight+"px"),h.stop(!0,!1).animate({"max-height":n},b.animate)),l=!1}function e(){l?d():c()}var f=this,g=$(a),h=null,i=null,j=null,k=null,l=!1,m=null,n=null,o={name:"",template:null,collapsedHeight:0,animate:{animate:"swing",duration:400},tolerance:50};if(b=$.extend(!0,o,b),b.template){var p=a.innerHTML;g.html($("#"+b.template).html()),g.find("[data-expander-content]").eq(0).html(p)}var q=$.extend({complete:function(){h.css("max-height","none")}},b.animate);f.elementReady=function(){h=g.find("[data-expander-content]").eq(0),i=g.find("[data-expander-toggles]").eq(0),j=i.find("[data-expander-expand]").eq(0),k=i.find("[data-expander-collapse]").eq(0);var a=i.find("[data-expander-toggle]").eq(0);if(h.css("overflow","hidden"),isNaN(b.collapsedHeight)){var f=h.find(b.collapsedHeight).eq(0).position();m=f?f.top:Number.MAX_VALUE}else m=b.collapsedHeight;n=m+"px",h.outerHeight(!0)>m+b.tolerance?(h.css({"max-height":n}),j.click(function(a){a.preventDefault(),c()}),k.click(function(a){a.preventDefault(),d()}),a.click(function(a){a.preventDefault(),e()}),d(!0)):i.hide()}}a.bindingHandlers.expander={init:function(a,c){var d=c()||{},e=new b(a,d);setTimeout(function(){e.elementReady&&e.elementReady()},1)}}});